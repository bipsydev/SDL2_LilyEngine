<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>SDL2_LilyEngine: &lt;tt&gt;SDL2_LilyEngine&lt;/tt&gt; by &lt;em&gt;lilitharcana&lt;/em&gt;</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">SDL2_LilyEngine
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('md_README.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title"><code>SDL2_LilyEngine</code> by <em>lilitharcana</em> </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h5><em>Check the</em> <a href="https://lilitharcana.github.io/SDL2_LilyEngine">docs!</a></h5>
<blockquote class="doxtable">
<p><em>I'm learning SDL2 and C++ by making a game engine!</em> </p>
</blockquote>
<p>__<code>SDL2_LilyEngine</code>__ aims to be an educational high-level OOP wrapper framework for the SDL2 graphics library in C++! <br  />
 At its core, __<code>SDL2_LilyEngine</code>__ will be a <em>static library</em> of components for easy SDL operations. A <em>framework</em> for creating your own game class via inheritance can be used, or you can use the libraries individually. Additionally in the future, I plan to make a <em>graphical interface</em> to the engine that outputs C++ code! <br  />
</p>
<hr  />
<p>It will provide one main abstract <code>LilyEngine::BaseGame</code> class with 5 pure virtual methods: </p><div class="fragment"><div class="line"> {C++}</div>
<div class="line">namespace LilyEngine {</div>
<div class="line">    class BaseGame {</div>
<div class="line">    protected:</div>
<div class="line">        // initialize game objects, global variables, set inputs, load resources, configure systems...</div>
<div class="line">        virtual void init(string title) = 0;</div>
<div class="line"> </div>
<div class="line">        // Main game loop, runs every frame:</div>
<div class="line">        virtual bool event(SDL_Event* event) = 0;   // react to an event passed to the game, and return true if the event was caught</div>
<div class="line">        virtual void update() = 0;          // update game variables based in events/input/etc</div>
<div class="line">        virtual void render() = 0;          // render graphics output for the frame</div>
<div class="line"> </div>
<div class="line">        // save the game if needed, unload textures, quit systems</div>
<div class="line">        virtual void cleanup() = 0;</div>
<div class="line">    };</div>
<div class="line">}</div>
</div><!-- fragment --><p> This way, you can inherit from <code><a class="el" href="classBaseGame.html">BaseGame</a></code> and make your own <code>MyWackyGame</code> class overriding the virtual methods, and then run the game in your main method: </p><div class="fragment"><div class="line"> {C++}</div>
<div class="line">int main(int argv, char** args) {</div>
<div class="line">    MyWackyGame* game = new MyWackyGame();</div>
<div class="line">    int exit_val = game-&gt;run();</div>
<div class="line">    delete game;</div>
<div class="line">    return exit_val;</div>
<div class="line">}</div>
</div><!-- fragment --><p> Or for even better shorthand: </p><div class="fragment"><div class="line"> {C++}</div>
<div class="line">int main(int argv, char** args) {</div>
<div class="line">    return MyWackyGame::factoryRun();</div>
<div class="line">}</div>
</div><!-- fragment --><p> There will also be protected class member subsystems you can use modularly inside your game subclass: </p><div class="fragment"><div class="line"> {C++}</div>
<div class="line">namespace LilyEngine {</div>
<div class="line">    class BaseGame {</div>
<div class="line">    protected:</div>
<div class="line">        LilyEngine:Clock clock;         // holds game time, frame number, delta time, can cap fps or enable vsync</div>
<div class="line">        LilyEngine:StageManager stageManager;   // manages your Stages, sets the active stage and updates it with all its actors</div>
<div class="line">        LilyEngine:Graphics graphics;       // graphics loading/rendering module, creates sprites, fonts, and shape drawing</div>
<div class="line">        LilyEngine:Audio audio;         // audio module for loading/playing sounds</div>
<div class="line">        LilyEngine:Input input;         // input module for querying controls</div>
<div class="line">    };</div>
<div class="line">}</div>
</div><!-- fragment --><p> The <em>stage</em> and <em>actor</em> system is used to create game actors and add them to a stage. The <code>LilyEngine::Actor</code> abstract class can be inherited to create your own game object classes. The <code>LilyEngine::Stage</code> class can be filled with Actors, subsequently saved or loaded, and hold cameras and room information. The <code>LilyEngine::StageManager</code> controls the current stage, keeps loaded stages running, and can script stages/scenes together and run/save them! </p><div class="fragment"><div class="line"> {C++}</div>
<div class="line">class MyPlayerActor: public LilyEngine::SpriteActor {</div>
<div class="line">    MyPlayerActor(): LilyEngine::SpriteActor(&quot;images/player.png&quot;) {</div>
<div class="line">    }</div>
<div class="line">    </div>
<div class="line">    void enterStage() override {</div>
<div class="line">        setPosition(LilyEngine::POS_WINDOW_CENTER);</div>
<div class="line">    }</div>
<div class="line">    void update() override {</div>
<div class="line">        speed.x += getGame().clock.delta;</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">// ... then, at some point during inside your game&#39;s init() or update():</div>
<div class="line">Stage level1 = stageManager.loadfromMap(&quot;maps/level1.tmx&quot;);</div>
<div class="line">level1.enterWithFocus(MyPlayerActor());</div>
<div class="line">stageManager.setActive(level1);</div>
<div class="line">// now the stage will automatically be updating during event(), update(), and render()!</div>
<div class="line"> </div>
<div class="line">// ... when the game is closed/exited:</div>
<div class="line">stageManager.saveAll(&quot;saves/save1.gamestate&quot;);</div>
<div class="line">// and when the game is reopened and needs to reload:</div>
<div class="line">stageManager.loadAll(&quot;saves/save1.gamestate&quot;);</div>
</div><!-- fragment --><hr  />
 <h1><a class="anchor" id="autotoc_md3"></a>
Plan Overview</h1>
<p>&gt;This engine will attempt to be versatile, meaning you could make a fully featured barebones game in a couple lines of code, or you can use certain parts of the engine that you like!</p>
<p>Let's say I wanted to make a platformer game. I'll need graphics, audio, controls, maps, physics, different levels, menus, options... or I could put all of that into one simple to use PlatformerGame class: </p><div class="fragment"><div class="line"> {C++}</div>
<div class="line">PlatformerGame game = PlatformerGame(&quot;my-game.gameconfig&quot;); // optional .gameconfig file can have anything to edit the default PlatformerGame class</div>
<div class="line"> </div>
<div class="line">// Use PlatformerGame&#39;s public methods to set it up how you like!</div>
<div class="line">game.setPlayer(&quot;player.png&quot;);</div>
<div class="line">game.setBackground(&quot;bg.png&quot;);</div>
<div class="line">game.addLevels(&quot;map0*.tmx&quot;);    // adds all levels that match this! map00, map01, map02, etc</div>
<div class="line"> </div>
<div class="line">// run and close the game!</div>
<div class="line">game.run();</div>
</div><!-- fragment --><p> Or if I want more customization with the player or physics, I can subclass PlatformerGame and implement my own functionality into the game: </p><div class="fragment"><div class="line"> {C++}</div>
<div class="line">class MyPlatformerGame: public PlatformerGame</div>
<div class="line">{</div>
<div class="line">public:</div>
<div class="line">    MyPlatformerGame(): PlatformerGame(&quot;my-game.gameconfig&quot;)</div>
<div class="line">    {</div>
<div class="line">        setPlayer(&quot;player.png&quot;);</div>
<div class="line">    setBackground(&quot;bg.png&quot;);</div>
<div class="line">    addLevels(&quot;map0*.tmx&quot;);</div>
<div class="line">    }</div>
<div class="line">protected:</div>
<div class="line">    // override protected methods from PlatformerGame or Game here to change internal functionality!</div>
<div class="line">}</div>
</div><!-- fragment --><p> Or I can construct a base game with no default functionality and write it all myself by inheriting from <code>Game</code>!</p>
<h2><a class="anchor" id="autotoc_md4"></a>
Planned Features</h2>
<h3><a class="anchor" id="autotoc_md5"></a>
Game Class</h3>
<p>The engine will mostly be a main <code>Game</code> class that you can inherit from: </p><div class="fragment"><div class="line"> {C++}</div>
<div class="line">class MyGame: public Game</div>
<div class="line">{</div>
<div class="line">protected:</div>
<div class="line">    void init();    // Initialize your game objects/assets</div>
<div class="line">    void event();   // React to user input or other events</div>
<div class="line">    void update();  // Update game logic/physics</div>
<div class="line">    void render();  // draw to the game framebuffer</div>
<div class="line">    void clean();   // optional, free up all assets</div>
<div class="line">}</div>
</div><!-- fragment --><p> Then running the game is as simple as: </p><div class="fragment"><div class="line"> {C++}</div>
<div class="line">int main(int argc, char* argv[])</div>
<div class="line">{</div>
<div class="line">    game = MyGame();</div>
<div class="line">    return game.run();</div>
<div class="line">}</div>
</div><!-- fragment --><p> <a class="anchor" id="autotoc_md6"></a> </p><h5>Virtual, Protected Methods</h5>
<blockquote class="doxtable">
<p><code>Game</code> class and it's subclass templates (like <code>PlatformerGame</code>) all contain many protected virtual methods that can be overridden. This way, the internal functionality can always be changed at specific points! </p>
</blockquote>
<h3><a class="anchor" id="autotoc_md7"></a>
Asset Management</h3>
<p>The engine will have a simple system for creating <code>GameObject</code>s out of assets, with an internal <code>Resource</code> manager: </p><div class="fragment"><div class="line"> {C++}</div>
<div class="line">// Create a Sprite game object (pos, size, rotation, color, blendmode, etc), with a Texture resource (internal, managed by Assets class)</div>
<div class="line">Sprite* player = Assets.createSprite(&quot;img/player.png&quot;);</div>
<div class="line">// Create another Sprite based on the same image! Assets class will manage this so they share a texture!</div>
<div class="line">Sprite* player2 = Assets.createSprite(&quot;img/player.png&quot;);</div>
<div class="line"> </div>
<div class="line">// Audio game object (pos, volume, panning, loops), with an Audio resource</div>
<div class="line">Sound* music = Assets.createSound(&quot;snd/bg-music.wav&quot;);</div>
<div class="line"> </div>
<div class="line">// TileMap game object, uses Tiled files (mapeditor.org)</div>
<div class="line">TileMap* overworldMap = Assets.createTileMap(&quot;map/tile-world.tmx&quot;); </div>
<div class="line"> </div>
<div class="line">// Stage game object, can create a Stage based on a .stage file</div>
<div class="line">Stage level1 = Assets.createStage(&quot;map/level-1.stage&quot;);</div>
<div class="line"> </div>
<div class="line">// To optionally free assets before the game ends:</div>
<div class="line">delete player;  // destructors will free resources</div>
<div class="line">delete music;</div>
<div class="line"> </div>
<div class="line">// To free up all assets at the end of the game:</div>
<div class="line">Assets.free();</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md8"></a>
Stages</h3>
<p>All of the game objects created can be added to <code>Stage</code>s: </p><div class="fragment"><div class="line"> {C++}</div>
<div class="line">Stage world = Stage();  // Create a blank Stage</div>
<div class="line">world.setMap();     // Set the map to be used</div>
<div class="line">world.add(player);  // Add a Sprite (actor)</div>
<div class="line">world.setMusic(music);  // Set the music (will play when stage becomes active)</div>
</div><!-- fragment --><p> Stages can be set to automatically update, render, and catch events for all of its actors: </p><div class="fragment"><div class="line"> {C++}</div>
<div class="line">game.setStage(world);</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md9"></a>
Event Handling</h3>
<p>Lambda functions can be attached as an <code>EventHandler</code> to any <code>GameObject</code>, <code>Stage</code>, or <code>Game</code>! </p><div class="fragment"><div class="line"> {C++}</div>
<div class="line">player.addEvent&lt;KeyboardEvent&gt;(</div>
<div class="line">    [&amp;player] (KeyboardEvent event) {</div>
<div class="line">        if(event.keycode == &quot;K_SPACE&quot;)</div>
<div class="line">    {</div>
<div class="line">        player.jump();</div>
<div class="line">        player.addVelocity(-5.0f, 0f);</div>
<div class="line">    }</div>
<div class="line">    }</div>
<div class="line">);</div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Tue Jul 13 2021 18:55:48 for SDL2_LilyEngine by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
